<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Stimmungskompass DEMO</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
  </head>
  <div class="top-bar">
    <a href="/">
      <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo">
    </a>
    <button id="hamburger-button">&#9776;</button>
    <div id="nav-overlay" class="nav-overlay">
      <div id="nav-links">
        <a href="/karte">Karte</a>
        <a href="/list">Projektvorschl√§ge</a>
        <a href="/neuerbeitrag">Vorschlag hinzuf√ºgen</a>
        <a href="/ueber">√úber</a>
        <a href="/profil">Profil</a> {% if current_user.is_authenticated %} <span class="user-info" style="margin-top: 10px;"> Benutzer: {{ current_user.name }}
        </span>
        <a href="{{ url_for('logout', next=request.path) }}">
          <button class="button">Abmelden</button>
        </a> {% else %} <a href="{{ url_for('login', next=request.path) }}">
          <button class="button">Anmelden</button>
        </a> {% endif %}
      </div>
    </div>
  </div>
  </div>
  <div class="index-image">
    <img alt="Index Title Image" class="index-image" src="{{ url_for('static', filename='index_titleimage.png') }}" style="; max-width: 100%; height: auto;" />
    <div class="cover-text-container">
      <h1>Versch√∂nern Sie Ihre Stadt!</h1>
      <p>Tragen Sie zu einer h√∂heren Lebensqualit√§t bei!</p>
    </div>
  </div>
  <div class="info-box-container">
    <!-- Box 1 -->
    <div class="info-box box-red" onclick="redirectToStimmungskarte()" style="cursor: pointer; margin: 10px">
      <img alt="Map Icon" class="info-box-icon" src="{{ url_for('static', filename='index_icon_map.png') }}">
      <p class="info-box-title">Karte</p>
      <p class="info-box-undertitle">Posten Sie neue Notizen und sehen Sie sich andere Beitr√§ge an, die andere Leute gepostet haben!</p>
    </div>
    <!-- Box 2 -->
    <div class="info-box box-blue" onclick="redirectToneuerbeitrag()" style="cursor: pointer; margin: 10px">
      <img alt="Public Icon" class="info-box-icon" src="{{ url_for('static', filename='index_icon_public.png') }}">
      <p class="info-box-title">Machen Sie einen Vorschlag!</p>
      <p class="info-box-undertitle">Teilen Sie Ihrer Stadt mit, welche Ver√§nderungen oder Verbesserungen Sie sich w√ºnschen!</p>
      <p class="info-box-undertitle">Aktuelle Projektvorschl√§ge: {{ project_count }}</p>
      <p class="info-box-undertitle">Aktuelle Notizen: {{ mapobject_count }}</p>
    </div>
    <!-- Box 3 -->
    <div class="info-box box-green" onclick="redirectToList()" style="cursor: pointer; margin: 10px">
      <img alt="List Icon" class="info-box-icon" src="{{ url_for('static', filename='index_icon_list.png') }}">
      <p class="info-box-title">Aktuelle Projektvorschl√§ge</p>
      <p class="info-box-undertitle">Stimmen Sie √ºber Projektvorschl√§ge ab und verhelfen Sie ihnen zum Erfolg!</p>
    </div>
  </div>
  <!-- Info text field with wrapped text container -->
  <div class="info-text-field">
    <div class="info-text-container">
      <p class="info-text-undertitle">Der Stimmungskompass eine Plattform zur B√ºrgerinnen- und B√ºrgerbeteiligung.</p>
      <p class="info-text-undertitle">Helfen Sie der Stadt bei Entscheidungen, die das √∂ffentliche Leben betreffen. Teilen Sie Ihre Ideen und stimmen Sie √ºber die Projektvorschl√§ge anderer ab tragen Sie zur Verbesserung der Lebensqualit√§t bei.</p>
    </div>
  </div>
  <!-- Featured Projects Section -->
  <div class="projects-header">
    <h1>Ausgew√§hlte Projekte:</h1>
    <p>Sehen Sie sich die Projektvorschl√§ge an, die von der Stadt als interessant ausgew√§hlt wurden.</p>
  </div>
  <div class="project-list"> {% if featured_projects %} {% for project in featured_projects %} <div class="project-thumbnail" data-project-id="{{ project.id }}" onclick="window.location.href='{{ url_for('project_details', project_id=project.id) }}'">
      <h2>{{ project.name }}</h2>
      <p class="project-date">Gepostet am: {{ project.date.strftime('%d.%m.%Y') }}</p>
      <!-- Voting Bar -->
      <div class="voting-bar"> {% if project.upvotes > 0 %} <div class="upvotes" style="width: {{ project.upvote_percentage }}%;">
          <span>{{ project.upvotes }} üëç ({{ project.upvote_percentage|round(1) }}%)</span>
        </div> {% endif %} {% if project.downvotes > 0 %} <div class="downvotes" style="width: {{ project.downvote_percentage }}%;">
          <span>{{ project.downvotes }} üëé ({{ project.downvote_percentage|round(1) }}%)</span>
        </div> {% endif %} </div>
      <img src="{{ url_for('static', filename='usersubmissions/' + project.image_file) }}" alt="{{ project.name }}">
      <div class="project-description">{{ project.descriptionwhy|safe }}</div>
    </div> {% endfor %} {% else %} <p style="text-align: center;">Keine hervorgehobenen Projekte gefunden.</p> {% endif %} </div>
<div class="bottom-bar">
  <p>v21.2.2024 b17j, Kontakt: office@stimmungskompass.at | <a href="/privacy" style="color: white;">Impressum / Datenschutz</a></p>
</div>

  </body>
</html>
<script>
  // Toggle the navigation overlay when the hamburger button is clicked
  document.getElementById('hamburger-button').addEventListener('click', function() {
    var navOverlay = document.getElementById('nav-overlay');
    navOverlay.classList.toggle('nav-overlay-active');
  });
  // Close the navigation overlay when clicking on the overlay background or on a non-button element
  document.getElementById('nav-overlay').addEventListener('click', function(event) {
    // Close only if the clicked element is not a button or a link
    if (!event.target.closest('button, a')) {
      closeNavOverlay();
    }
  });
  // Function to close the navigation overlay
  function closeNavOverlay() {
    var navOverlay = document.getElementById('nav-overlay');
    navOverlay.classList.remove('nav-overlay-active');
  }
  // Prevent closing when clicking on buttons (delegation)
  document.getElementById('nav-links').addEventListener('click', function(event) {
    if (event.target.tagName === 'BUTTON' || event.target.tagName === 'A') {
      event.stopPropagation();
    }
  });
  // Resize event listener
  window.addEventListener('resize', function() {
    // Check if the window width is greater than the threshold for mobile view
    if (window.innerWidth > 1080) {
      // Make sure the nav-overlay is displayed
      document.getElementById('nav-overlay').classList.add('nav-overlay-active');
    } else {
      // For mobile view, revert back to the default behavior
      document.getElementById('nav-overlay').classList.remove('nav-overlay-active');
    }
  });
  // Call the function on page load to set the initial state
  function toggleOverlay() {
    var overlay = document.getElementById("category-choices");
    if (overlay.style.display === "none") {
      overlay.style.display = "flex";
    } else {
      overlay.style.display = "none";
    }
  }
  // JavaScript function to handle redirection to Stimmungskarte
  function redirectToStimmungskarte() {
    window.location.href = '/karte';
  }
  // JavaScript function to handle redirection to Suggest an Idea
  function redirectToList() {
    window.location.href = '/list';
  }
  // JavaScript function to handle redirection to List of Current Suggestions
  function redirectToneuerbeitrag() {
    window.location.href = '/neuerbeitrag';
  }

  function toggleMenu() {
    var x = document.getElementById("nav-links");
    if (x.style.display === "block") {
      x.style.display = "none";
    } else {
      x.style.display = "block";
    }
  }
</script>